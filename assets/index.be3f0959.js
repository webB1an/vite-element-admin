var O=Object.defineProperty,T=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var B=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))z.call(t,n)&&B(e,n,t[n]);if(w)for(var n of w(t))F.call(t,n)&&B(e,n,t[n]);return e},b=(e,t)=>T(e,N(t));import{p as C,b as D,S as K,j as S,E as R,U as H,B as E,V as W,W as G,X as M,r as $,o as q,f as X,l as V,u as _,w as J,F as Q,i as Y,g as Z}from"./vendor.e480173a.js";import{p as ee}from"./index.e722b2c5.js";const ne=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],te=e=>ne.map(t=>t.toLowerCase()).indexOf(e.toLowerCase())!==-1,oe=(e,t,n)=>{Object.keys(t).filter(te).forEach(r=>{const o=t[r];typeof o=="function"&&(r==="onInit"?o(e,n):n.on(r.substring(2),s=>o(s,n)))})},ie=(e,t,n,r)=>{const o=e.modelEvents?e.modelEvents:null,s=Array.isArray(o)?o.join(" "):o;C(r,(i,a)=>{n&&typeof i=="string"&&i!==a&&i!==n.getContent({format:e.outputFormat})&&n.setContent(i)}),n.on(s||"change input undo redo",()=>{t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},ae=(e,t,n,r,o,s)=>{r.setContent(s()),n.attrs["onUpdate:modelValue"]&&ie(t,n,r,o),oe(e,n.attrs,r)};let x=0;const j=e=>{const t=Date.now(),n=Math.floor(Math.random()*1e9);return x++,e+"_"+n+x+String(t)},le=e=>e!==null&&e.tagName.toLowerCase()==="textarea",k=e=>typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" "),re=(e,t)=>k(e).concat(k(t)),se=e=>e==null,A=()=>({listeners:[],scriptId:j("tiny-script"),scriptLoaded:!1}),ce=()=>{let e=A();const t=(o,s,i,a)=>{const c=s.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=o,c.src=i;const m=()=>{c.removeEventListener("load",m),a()};c.addEventListener("load",m),s.head&&s.head.appendChild(c)};return{load:(o,s,i)=>{e.scriptLoaded?i():(e.listeners.push(i),o.getElementById(e.scriptId)||t(e.scriptId,o,s,()=>{e.listeners.forEach(a=>a()),e.scriptLoaded=!0}))},reinitialize:()=>{e=A()}}},de=ce(),ue=()=>typeof window!="undefined"?window:global,u=()=>{const e=ue();return e&&e.tinymce?e.tinymce:null},me={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],language:String,plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:e=>e==="html"||e==="text"}},ge=(e,t,n,r)=>e(r||"div",{id:t,ref:n}),fe=(e,t,n)=>e("textarea",{id:t,visibility:"hidden",ref:n}),ye=D({props:me,setup:(e,t)=>{let n=e.init?f({},e.init):{};const{disabled:r,modelValue:o,tagName:s}=K(e),i=S(null);let a=null;const c=e.id||j("tiny-vue"),m=e.init&&e.init.inline||e.inline,p=!!t.attrs["onUpdate:modelValue"];let h=!0;const L=e.initialValue?e.initialValue:"";let v="";const P=l=>p?()=>(o==null?void 0:o.value)?o.value:"":()=>l?L:v,y=()=>{const l=P(h),d=b(f({},n),{readonly:e.disabled,selector:`#${c}`,language:e.language||"zh_CN",plugins:re(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:m,setup:g=>{a=g,g.on("init",I=>ae(I,e,t,g,o,l)),typeof n.setup=="function"&&n.setup(g)}});le(i.value)&&(i.value.style.visibility=""),u().init(d),h=!1};C(r,l=>{var d;a!==null&&(typeof((d=a.mode)==null?void 0:d.set)=="function"?a.mode.set(l?"readonly":"design"):a.setMode(l?"readonly":"design"))}),C(s,()=>{var l;p||(v=a.getContent()),(l=u())==null||l.remove(a),E(()=>y())}),R(()=>{if(u()!==null)y();else if(i.value&&i.value.ownerDocument){const l=e.cloudChannel?e.cloudChannel:"6",d=e.apiKey?e.apiKey:"no-api-key",g=se(e.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${d}/tinymce/${l}/tinymce.min.js`:e.tinymceScriptSrc;de.load(i.value.ownerDocument,g,y)}}),H(()=>{u()!==null&&(console.log("vueEditor",a),console.log("getTinymce()",u()),E(()=>{u().remove(a)}))}),m||(W(()=>{h||y()}),G(()=>{var l;p||(v=a.getContent()),(l=u())==null||l.remove(a)}));const U=l=>{var d;v=a.getContent(),(d=u())==null||d.remove(a),n=f(f({},n),l),E(()=>y())};return t.expose({rerender:U}),()=>m?ge(M,c,i,e.tagName):fe(M,c,i)}}),ve=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],pe=["lists","advlist","anchor","autolink","autosave","code","codesample","directionality","emoticons","fullscreen","image","insertdatetime","link","lists","media","nonbreaking","pagebreak","preview","save","searchreplace","table","template","visualblocks","visualchars","wordcount"];const he=["innerHTML"],be={name:"Tinymce"},_e=D(b(f({},be),{setup(e){const t=S(ee.join("/vite-element-admin","/tinymce/tinymce.min.js")),n=S(`
<h1 style="text-align: center;">WOW Welcome Tinymce Demo</h1>
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
</ul>
`);return(r,o)=>{const s=$("el-card");return q(),X(Q,null,[V(_(ye),{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=i=>n.value=i),toolbar:_(ve),plugins:_(pe),language:"zh-Hans","tinymce-script-src":t.value},null,8,["modelValue","toolbar","plugins","tinymce-script-src"]),V(s,{class:"rich-text mt20"},{default:J(()=>[Y(" eslint-disable-next-line vue/no-v-html "),Z("div",{innerHTML:n.value},null,8,he)]),_:1})],64)}}}));export{_e as default};
