var T=Object.defineProperty,U=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var D=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&D(e,n,t[n]);if(w)for(var n of w(t))z.call(t,n)&&D(e,n,t[n]);return e},b=(e,t)=>U(e,N(t));import{q as S,b as B,O as F,j as C,E as K,P as H,B as E,Q as G,R as W,S as x,r as q,o as $,f as Q,l as M,u as _,h as J,t as X,w as Y,F as Z,i as ee,g as ne}from"./vendor.097b4eaf.js";import{p as te}from"./index.d78d8c94.js";const oe=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ie=e=>oe.map(t=>t.toLowerCase()).indexOf(e.toLowerCase())!==-1,ae=(e,t,n)=>{Object.keys(t).filter(ie).forEach(r=>{const o=t[r];typeof o=="function"&&(r==="onInit"?o(e,n):n.on(r.substring(2),s=>o(s,n)))})},le=(e,t,n,r)=>{const o=e.modelEvents?e.modelEvents:null,s=Array.isArray(o)?o.join(" "):o;S(r,(i,a)=>{n&&typeof i=="string"&&i!==a&&i!==n.getContent({format:e.outputFormat})&&n.setContent(i)}),n.on(s||"change input undo redo",()=>{t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},re=(e,t,n,r,o,s)=>{r.setContent(s()),n.attrs["onUpdate:modelValue"]&&le(t,n,r,o),ae(e,n.attrs,r)};let V=0;const k=e=>{const t=Date.now(),n=Math.floor(Math.random()*1e9);return V++,e+"_"+n+V+String(t)},se=e=>e!==null&&e.tagName.toLowerCase()==="textarea",A=e=>typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" "),ce=(e,t)=>A(e).concat(A(t)),de=e=>e==null,L=()=>({listeners:[],scriptId:k("tiny-script"),scriptLoaded:!1}),ue=()=>{let e=L();const t=(o,s,i,a)=>{const c=s.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=o,c.src=i;const m=()=>{c.removeEventListener("load",m),a()};c.addEventListener("load",m),s.head&&s.head.appendChild(c)};return{load:(o,s,i)=>{e.scriptLoaded?i():(e.listeners.push(i),o.getElementById(e.scriptId)||t(e.scriptId,o,s,()=>{e.listeners.forEach(a=>a()),e.scriptLoaded=!0}))},reinitialize:()=>{e=L()}}},me=ue(),ge=()=>typeof window!="undefined"?window:global,u=()=>{const e=ge();return e&&e.tinymce?e.tinymce:null},fe={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],language:String,plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:e=>e==="html"||e==="text"}},ve=(e,t,n,r)=>e(r||"div",{id:t,ref:n}),ye=(e,t,n)=>e("textarea",{id:t,visibility:"hidden",ref:n}),pe=B({props:fe,setup:(e,t)=>{let n=e.init?f({},e.init):{};const{disabled:r,modelValue:o,tagName:s}=F(e),i=C(null);let a=null;const c=e.id||k("tiny-vue"),m=e.init&&e.init.inline||e.inline,p=!!t.attrs["onUpdate:modelValue"];let h=!0;const P=e.initialValue?e.initialValue:"";let y="";const j=l=>p?()=>(o==null?void 0:o.value)?o.value:"":()=>l?P:y,v=()=>{const l=j(h),d=b(f({},n),{readonly:e.disabled,selector:`#${c}`,language:e.language||"zh_CN",plugins:ce(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:m,setup:g=>{a=g,g.on("init",I=>re(I,e,t,g,o,l)),typeof n.setup=="function"&&n.setup(g)}});se(i.value)&&(i.value.style.visibility=""),u().init(d),h=!1};S(r,l=>{var d;a!==null&&(typeof((d=a.mode)==null?void 0:d.set)=="function"?a.mode.set(l?"readonly":"design"):a.setMode(l?"readonly":"design"))}),S(s,()=>{var l;p||(y=a.getContent()),(l=u())==null||l.remove(a),E(()=>v())}),K(()=>{if(u()!==null)v();else if(i.value&&i.value.ownerDocument){const l=e.cloudChannel?e.cloudChannel:"6",d=e.apiKey?e.apiKey:"no-api-key",g=de(e.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${d}/tinymce/${l}/tinymce.min.js`:e.tinymceScriptSrc;me.load(i.value.ownerDocument,g,v)}}),H(()=>{u()!==null&&(console.log("vueEditor",a),console.log("getTinymce()",u()),E(()=>{u().remove(a)}))}),m||(G(()=>{h||v()}),W(()=>{var l;p||(y=a.getContent()),(l=u())==null||l.remove(a)}));const O=l=>{var d;y=a.getContent(),(d=u())==null||d.remove(a),n=f(f({},n),l),E(()=>v())};return t.expose({rerender:O}),()=>m?ve(x,c,i,e.tagName):ye(x,c,i)}}),he=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],be=["lists","advlist","anchor","autolink","autosave","code","codesample","directionality","emoticons","fullscreen","image","insertdatetime","link","lists","media","nonbreaking","pagebreak","preview","save","searchreplace","table","template","visualblocks","visualchars","wordcount"];const Se=["innerHTML"],Ce={name:"Tinymce"},De=B(b(f({},Ce),{setup(e){const t=C(te.resolve("/vite-element-admin","/tinymce/tinymce.min.js")),n=C(`
<h1 style="text-align: center;">WOW Welcome Tinymce Demo</h1>
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
</ul>
`);return(r,o)=>{const s=q("el-card");return $(),Q(Z,null,[M(_(pe),{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=i=>n.value=i),toolbar:_(he),plugins:_(be),language:"zh-Hans","tinymce-script-src":t.value},null,8,["modelValue","toolbar","plugins","tinymce-script-src"]),J(" "+X(t.value)+" ",1),M(s,{class:"rich-text mt20"},{default:Y(()=>[ee(" eslint-disable-next-line vue/no-v-html "),ne("div",{innerHTML:n.value},null,8,Se)]),_:1})],64)}}}));export{De as default};
