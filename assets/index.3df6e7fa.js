var U=Object.defineProperty,T=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var w=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&w(e,n,t[n]);if(_)for(var n of _(t))z.call(t,n)&&w(e,n,t[n]);return e},C=(e,t)=>T(e,N(t));import{q as S,b as B,O as F,j as D,E as K,P as H,B as E,Q as G,R as W,S as M,r as q,o as $,f as Q,l as x,u as p,w as J,F as X,i as Y,g as Z}from"./vendor.097b4eaf.js";import{p as ee}from"./index.eb74a91e.js";const ne=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],te=e=>ne.map(t=>t.toLowerCase()).indexOf(e.toLowerCase())!==-1,oe=(e,t,n)=>{Object.keys(t).filter(te).forEach(r=>{const o=t[r];typeof o=="function"&&(r==="onInit"?o(e,n):n.on(r.substring(2),s=>o(s,n)))})},ie=(e,t,n,r)=>{const o=e.modelEvents?e.modelEvents:null,s=Array.isArray(o)?o.join(" "):o;S(r,(i,a)=>{n&&typeof i=="string"&&i!==a&&i!==n.getContent({format:e.outputFormat})&&n.setContent(i)}),n.on(s||"change input undo redo",()=>{t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},ae=(e,t,n,r,o,s)=>{r.setContent(s()),n.attrs["onUpdate:modelValue"]&&ie(t,n,r,o),oe(e,n.attrs,r)};let V=0;const k=e=>{const t=Date.now(),n=Math.floor(Math.random()*1e9);return V++,e+"_"+n+V+String(t)},le=e=>e!==null&&e.tagName.toLowerCase()==="textarea",A=e=>typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" "),re=(e,t)=>A(e).concat(A(t)),se=e=>e==null,L=()=>({listeners:[],scriptId:k("tiny-script"),scriptLoaded:!1}),ce=()=>{let e=L();const t=(o,s,i,a)=>{const c=s.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=o,c.src=i;const m=()=>{c.removeEventListener("load",m),a()};c.addEventListener("load",m),s.head&&s.head.appendChild(c)};return{load:(o,s,i)=>{e.scriptLoaded?i():(e.listeners.push(i),o.getElementById(e.scriptId)||t(e.scriptId,o,s,()=>{e.listeners.forEach(a=>a()),e.scriptLoaded=!0}))},reinitialize:()=>{e=L()}}},de=ce(),ue=()=>typeof window!="undefined"?window:global,u=()=>{const e=ue();return e&&e.tinymce?e.tinymce:null},me={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],language:String,plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:e=>e==="html"||e==="text"}},ge=(e,t,n,r)=>e(r||"div",{id:t,ref:n}),fe=(e,t,n)=>e("textarea",{id:t,visibility:"hidden",ref:n}),ye=B({props:me,setup:(e,t)=>{let n=e.init?f({},e.init):{};const{disabled:r,modelValue:o,tagName:s}=F(e),i=D(null);let a=null;const c=e.id||k("tiny-vue"),m=e.init&&e.init.inline||e.inline,h=!!t.attrs["onUpdate:modelValue"];let b=!0;const P=e.initialValue?e.initialValue:"";let v="";const j=l=>h?()=>(o==null?void 0:o.value)?o.value:"":()=>l?P:v,y=()=>{const l=j(b),d=C(f({},n),{readonly:e.disabled,selector:`#${c}`,language:e.language||"zh_CN",plugins:re(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:m,setup:g=>{a=g,g.on("init",I=>ae(I,e,t,g,o,l)),typeof n.setup=="function"&&n.setup(g)}});le(i.value)&&(i.value.style.visibility=""),u().init(d),b=!1};S(r,l=>{var d;a!==null&&(typeof((d=a.mode)==null?void 0:d.set)=="function"?a.mode.set(l?"readonly":"design"):a.setMode(l?"readonly":"design"))}),S(s,()=>{var l;h||(v=a.getContent()),(l=u())==null||l.remove(a),E(()=>y())}),K(()=>{if(u()!==null)y();else if(i.value&&i.value.ownerDocument){const l=e.cloudChannel?e.cloudChannel:"6",d=e.apiKey?e.apiKey:"no-api-key",g=se(e.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${d}/tinymce/${l}/tinymce.min.js`:e.tinymceScriptSrc;de.load(i.value.ownerDocument,g,y)}}),H(()=>{u()!==null&&(console.log("vueEditor",a),console.log("getTinymce()",u()),E(()=>{u().remove(a)}))}),m||(G(()=>{b||y()}),W(()=>{var l;h||(v=a.getContent()),(l=u())==null||l.remove(a)}));const O=l=>{var d;v=a.getContent(),(d=u())==null||d.remove(a),n=f(f({},n),l),E(()=>y())};return t.expose({rerender:O}),()=>m?ge(M,c,i,e.tagName):fe(M,c,i)}}),ve=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],pe=["lists","advlist","anchor","autolink","autosave","code","codesample","directionality","emoticons","fullscreen","image","insertdatetime","link","lists","media","nonbreaking","pagebreak","preview","save","searchreplace","table","template","visualblocks","visualchars","wordcount"];const he=["innerHTML"],be={name:"Tinymce"},_e=B(C(f({},be),{setup(e){const t=ee.resolve("/vite-element-admin","/tinymce/tinymce.min.js"),n=D(`
<h1 style="text-align: center;">WOW Welcome Tinymce Demo</h1>
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
</ul>
`);return(r,o)=>{const s=q("el-card");return $(),Q(X,null,[x(p(ye),{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=i=>n.value=i),toolbar:p(ve),plugins:p(pe),language:"zh-Hans","tinymce-script-src":p(t)},null,8,["modelValue","toolbar","plugins","tinymce-script-src"]),x(s,{class:"rich-text mt20"},{default:J(()=>[Y(" eslint-disable-next-line vue/no-v-html "),Z("div",{innerHTML:n.value},null,8,he)]),_:1})],64)}}}));export{_e as default};
